var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    __.prototype = b.prototype;
    d.prototype = new __();
};
define(["require", "exports", "ProductViews"], function (require, exports, productViews) {
    var bb = Backbone;
    var ViewState;
    (function (ViewState) {
        ViewState[ViewState["View"] = 0] = "View";
        ViewState[ViewState["Edit"] = 1] = "Edit";
        ViewState[ViewState["Add"] = 2] = "Add";
        ViewState[ViewState["List"] = 3] = "List";
    })(ViewState || (ViewState = {}));
    ;
    // collection view
    var StatusList = (function (_super) {
        __extends(StatusList, _super);
        function StatusList(options) {
            this.listTemplate = _.template($('#statusListView-template').html());
            this.listAddTemplate = _.template($('#statusListAddView-template').html());
            this.state = ViewState.List;
            _super.call(this, options);
        }
        StatusList.prototype.render = function () {
            var _this = this;
            // render header
            switch (this.state) {
                case ViewState.List:
                    this.el = this.$el.html(this.listTemplate(null));
                    this.delegateEvents({ "click .addButton": "stateAdd" });
                    break;
                case ViewState.Add:
                    this.el = this.$el.html(this.listAddTemplate(null));
                    var ps = new productViews.ProductsSelectView("ProductId");
                    this.$el.find('select[name=ProductId]').replaceWith(ps.render().el);
                    this.delegateEvents({
                        "click .saveButton": "stateSave",
                        "click .cancelButton": "stateCancel"
                    });
                    break;
            }
            // render list
            this.collection.each(function (s) {
                var slv = new StatusView;
                slv.model = s;
                _this.el.append(slv.render().el);
            }, this);
            return this;
        };
        // view state changes
        StatusList.prototype.stateAdd = function () {
            this.state = ViewState.Add;
            this.render();
        };
        StatusList.prototype.stateSave = function () {
            // todo save
            this.state = ViewState.List;
            this.render();
        };
        StatusList.prototype.stateCancel = function () {
            this.state = ViewState.List;
            this.render();
        };
        return StatusList;
    })(bb.View);
    exports.StatusList = StatusList;
    var StatusView = (function (_super) {
        __extends(StatusView, _super);
        function StatusView(options) {
            this.template = _.template($('#statusView-template').html());
            this.templateEdit = _.template($('#statusEditView-template').html());
            _super.call(this, options);
        }
        // render one of the two layouts
        StatusView.prototype.render = function () {
            switch (this.state) {
                case ViewState.View:
                    this.$el.html(this.template(this.model.toJSON()));
                    this.delegateEvents({
                        "click .editButton": "stateEdit",
                        "click .deleteButton": "stateDelete"
                    });
                    break;
                case ViewState.Edit:
                    this.$el.html(this.templateEdit(this.model.toJSON()));
                    this.delegateEvents({
                        "click .saveButton": "stateSave",
                        "click .cancelButton": "stateCancel"
                    });
                    break;
            }
            return this;
        };
        // view state changes
        StatusView.prototype.stateEdit = function () {
            this.state = ViewState.Edit;
        };
        StatusView.prototype.stateDelete = function () {
            this.model.destroy();
        };
        StatusView.prototype.stateSave = function () {
            // todo save
            this.state = ViewState.View;
        };
        StatusView.prototype.stateCancel = function () {
            this.state = ViewState.View;
        };
        return StatusView;
    })(bb.View);
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlN0YXR1c1ZpZXdzLnRzIl0sIm5hbWVzIjpbIlZpZXdTdGF0ZSIsIlN0YXR1c0xpc3QiLCJTdGF0dXNMaXN0LmNvbnN0cnVjdG9yIiwiU3RhdHVzTGlzdC5yZW5kZXIiLCJTdGF0dXNMaXN0LnN0YXRlQWRkIiwiU3RhdHVzTGlzdC5zdGF0ZVNhdmUiLCJTdGF0dXNMaXN0LnN0YXRlQ2FuY2VsIiwiU3RhdHVzVmlldyIsIlN0YXR1c1ZpZXcuY29uc3RydWN0b3IiLCJTdGF0dXNWaWV3LnJlbmRlciIsIlN0YXR1c1ZpZXcuc3RhdGVFZGl0IiwiU3RhdHVzVmlldy5zdGF0ZURlbGV0ZSIsIlN0YXR1c1ZpZXcuc3RhdGVTYXZlIiwiU3RhdHVzVmlldy5zdGF0ZUNhbmNlbCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztJQUFBLElBQU8sRUFBRSxHQUFHLFFBQVEsQ0FBQztJQUlyQixJQUFLLFNBQW1DO0lBQXhDLFdBQUssU0FBUztRQUFHQSx5Q0FBSUEsQ0FBQUE7UUFBRUEseUNBQUlBLENBQUFBO1FBQUVBLHVDQUFHQSxDQUFBQTtRQUFFQSx5Q0FBSUEsQ0FBQUE7SUFBQ0EsQ0FBQ0EsRUFBbkMsU0FBUyxLQUFULFNBQVMsUUFBMEI7SUFBQSxDQUFDO0lBQ3pDLEFBQ0Esa0JBRGtCOztRQUNjQyw4QkFBc0JBO1FBSWxEQSxvQkFBWUEsT0FBYUE7WUFDckJDLElBQUlBLENBQUNBLFlBQVlBLEdBQUdBLENBQUNBLENBQUNBLFFBQVFBLENBQUNBLENBQUNBLENBQUNBLDBCQUEwQkEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsRUFBRUEsQ0FBQ0EsQ0FBQ0E7WUFDckVBLElBQUlBLENBQUNBLGVBQWVBLEdBQUdBLENBQUNBLENBQUNBLFFBQVFBLENBQUNBLENBQUNBLENBQUNBLDZCQUE2QkEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsRUFBRUEsQ0FBQ0EsQ0FBQ0E7WUFDM0VBLElBQUlBLENBQUNBLEtBQUtBLEdBQUdBLFNBQVNBLENBQUNBLElBQUlBLENBQUNBO1lBQzVCQSxrQkFBTUEsT0FB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QUNBO1FBQ0RGLHFCQUFxQkE7UUFDckJBLDhCQUFTQSxHQUFUQTtZQUNJRyxJQUFJQSxDQUFDQSxLQUFLQSxHQUFHQSxTQUFTQSxDQUFDQSxJQUFJQSxDQUFDQTtRQUNoQ0EsQ0FBQ0E7UUFDREgsZ0NBQVdBLEdBQVhBO1lBQ0lJLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLE9BQU9BLEVBQUVBLENBQUNBO1FBQ3pCQSxDQUFDQTtRQUNESiw4QkFBU0EsR0FBVEE7WUFDSUssQUFDQUEsWUFEWUE7WUFDWkEsSUFBSUEsQ0FBQ0EsS0FBS0EsR0FBR0EsU0FBU0EsQ0FBQ0EsSUFBSUEsQ0FBQ0E7UUFDaENBLENBQUNBO1FBQ0RMLGdDQUFXQSxHQUFYQTtZQUNJTSxJQUFJQSxDQUFDQSxLQUFLQSxHQUFHQSxTQUFTQSxDQUFDQSxJQUFJQSxDQUFDQTtRQUNoQ0EsQ0FBQ0E7UUFDTE4saUJBQUNBO0lBQURBLENBM0NBLEFBMkNDQSxFQTNDd0IsRUFBRSxDQUFDLElBQUksRUEyQy9CIiwiZmlsZSI6IlN0YXR1c1ZpZXdzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGJiID0gQmFja2JvbmU7XHJcbmltcG9ydCBtb2RlbHMgPSByZXF1aXJlKFwiTW9kZWxzXCIpO1xyXG5pbXBvcnQgcHJvZHVjdFZpZXdzID0gcmVxdWlyZShcIlByb2R1Y3RWaWV3c1wiKTtcclxuXHJcbmVudW0gVmlld1N0YXRlIHsgVmlldywgRWRpdCwgQWRkLCBMaXN0IH07XHJcbi8vIGNvbGxlY3Rpb24gdmlld1xyXG5leHBvcnQgY2xhc3MgU3RhdHVzTGlzdCBleHRlbmRzIGJiLlZpZXc8bW9kZWxzLlN0YXR1cz4ge1xyXG4gICAgcHJpdmF0ZSBzdGF0ZTogVmlld1N0YXRlO1xyXG4gICAgcHJpdmF0ZSBsaXN0VGVtcGxhdGU6IChkYXRhOiBhbnkpID0+IHN0cmluZztcclxuICAgIHByaXZhdGUgbGlzdEFkZFRlbXBsYXRlOiAoZGF0YTogYW55KSA9PiBzdHJpbmc7XHJcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zPzogYW55KSB7XHJcbiAgICAgICAgdGhpcy5saXN0VGVtcGxhdGUgPSBfLnRlbXBsYXRlKCQoJyNzdGF0dXNMaXN0Vmlldy10ZW1wbGF0ZScpLmh0bWwoKSk7XHJcbiAgICAgICAgdGhpcy5saXN0QWRkVGVtcGxhdGUgPSBfLnRlbXBsYXRlKCQoJyNzdGF0dXNMaXN0QWRkVmlldy10ZW1wbGF0ZScpLmh0bWwoKSk7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IFZpZXdTdGF0ZS5MaXN0O1xyXG4gICAgICAgIHN1cGVyKG9wdGlvbnMpO1xyXG4gICAgfVxyXG4gICAgcmVuZGVyKCk6IGJiLlZpZXc8bW9kZWxzLlN0YXR1cz4ge1xyXG4gICAgICAgIC8vIHJlbmRlciBoZWFkZXJcclxuICAgICAgICBzd2l0Y2ggKHRoaXMuc3RhdGUpIHtcclxuICAgICAgICAgICAgY2FzZSBWaWV3U3RhdGUuTGlzdDpcclxuICAgICAgICAgICAgICAgIHRoaXMuZWwgPSB0aGlzLiRlbC5odG1sKHRoaXMubGlzdFRlbXBsYXRlKG51bGwpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGVsZWdhdGVFdmVudHMoeyBcImNsaWNrIC5hZGRCdXR0b25cIjogXCJzdGF0ZUFkZFwiIH0pO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgVmlld1N0YXRlLkFkZDpcclxuICAgICAgICAgICAgICAgIHRoaXMuZWwgPSB0aGlzLiRlbC5odG1sKHRoaXMubGlzdEFkZFRlbXBsYXRlKG51bGwpKTtcclxuICAgICAgICAgICAgICAgIHZhciBwcyA9IG5ldyBwcm9kdWN0Vmlld3MuUHJvZHVjdHNTZWxlY3RWaWV3KFwiUHJvZHVjdElkXCIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy4kZWwuZmluZCgnc2VsZWN0W25hbWU9UHJvZHVjdElkXScpLnJlcGxhY2VXaXRoKHBzLnJlbmRlcigpLmVsKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGVsZWdhdGVFdmVudHMoe1xyXG4gICAgICAgICAgICAgICAgICAgIFwiY2xpY2sgLnNhdmVCdXR0b25cIjogXCJzdGF0ZVNhdmVcIixcclxuICAgICAgICAgICAgICAgICAgICBcImNsaWNrIC5jYW5jZWxCdXR0b25cIjogXCJzdGF0ZUNhbmNlbFwiXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyByZW5kZXIgbGlzdFxyXG4gICAgICAgIHRoaXMuY29sbGVjdGlvbi5lYWNoKHMgPT4ge1xyXG4gICAgICAgICAgICB2YXIgc2x2ID0gbmV3IFN0YXR1c1ZpZXc7XHJcbiAgICAgICAgICAgIHNsdi5tb2RlbCA9IHM7XHJcbiAgICAgICAgICAgIHRoaXMuZWwuYXBwZW5kKHNsdi5yZW5kZXIoKS5lbCk7XHJcbiAgICAgICAgfSwgdGhpcyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICAvLyB2aWV3IHN0YXRlIGNoYW5nZXNcclxuICAgIHN0YXRlQWRkKCkge1xyXG4gICAgICAgIHRoaXMuc3RhdGUgPSBWaWV3U3RhdGUuQWRkO1xyXG4gICAgICAgIHRoaXMucmVuZGVyKCk7XHJcbiAgICB9XHJcbiAgICBzdGF0ZVNhdmUoKSB7XHJcbiAgICAgICAgLy8gdG9kbyBzYXZlXHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IFZpZXdTdGF0ZS5MaXN0O1xyXG4gICAgICAgIHRoaXMucmVuZGVyKCk7XHJcbiAgICB9XHJcbiAgICBzdGF0ZUNhbmNlbCgpIHtcclxuICAgICAgICB0aGlzLnN0YXRlID0gVmlld1N0YXRlLkxpc3Q7XHJcbiAgICAgICAgdGhpcy5yZW5kZXIoKTtcclxuICAgIH1cclxufVxyXG5jbGFzcyBTdGF0dXNWaWV3IGV4dGVuZHMgYmIuVmlldzxtb2RlbHMuU3RhdHVzPiB7XHJcbiAgICBwcml2YXRlIHN0YXRlOiBWaWV3U3RhdGU7XHJcbiAgICBwcml2YXRlIHRlbXBsYXRlOiAoZGF0YTogYW55KSA9PiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIHRlbXBsYXRlRWRpdDogKGRhdGE6IGFueSkgPT4gc3RyaW5nO1xyXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucz86IGFueSkge1xyXG4gICAgICAgIHRoaXMudGVtcGxhdGUgPSBfLnRlbXBsYXRlKCQoJyNzdGF0dXNWaWV3LXRlbXBsYXRlJykuaHRtbCgpKTtcclxuICAgICAgICB0aGlzLnRlbXBsYXRlRWRpdCA9IF8udGVtcGxhdGUoJCgnI3N0YXR1c0VkaXRWaWV3LXRlbXBsYXRlJykuaHRtbCgpKTtcclxuICAgICAgICBzdXBlcihvcHRpb25zKTtcclxuICAgIH1cclxuICAgIC8vIHJlbmRlciBvbmUgb2YgdGhlIHR3byBsYXlvdXRzXHJcbiAgICByZW5kZXIoKTogYmIuVmlldzxtb2RlbHMuU3RhdHVzPiB7XHJcbiAgICAgICAgc3dpdGNoICh0aGlzLnN0YXRlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgVmlld1N0YXRlLlZpZXc6XHJcbiAgICAgICAgICAgICAgICB0aGlzLiRlbC5odG1sKHRoaXMudGVtcGxhdGUodGhpcy5tb2RlbC50b0pTT04oKSkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZWxlZ2F0ZUV2ZW50cyh7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJjbGljayAuZWRpdEJ1dHRvblwiOiBcInN0YXRlRWRpdFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiY2xpY2sgLmRlbGV0ZUJ1dHRvblwiOiBcInN0YXRlRGVsZXRlXCJcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgVmlld1N0YXRlLkVkaXQ6XHJcbiAgICAgICAgICAgICAgICB0aGlzLiRlbC5odG1sKHRoaXMudGVtcGxhdGVFZGl0KHRoaXMubW9kZWwudG9KU09OKCkpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGVsZWdhdGVFdmVudHMoe1xyXG4gICAgICAgICAgICAgICAgICAgIFwiY2xpY2sgLnNhdmVCdXR0b25cIjogXCJzdGF0ZVNhdmVcIixcclxuICAgICAgICAgICAgICAgICAgICBcImNsaWNrIC5jYW5jZWxCdXR0b25cIjogXCJzdGF0ZUNhbmNlbFwiXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIC8vIHZpZXcgc3RhdGUgY2hhbmdlc1xyXG4gICAgc3RhdGVFZGl0KCkge1xyXG4gICAgICAgIHRoaXMuc3RhdGUgPSBWaWV3U3RhdGUuRWRpdDtcclxuICAgIH1cclxuICAgIHN0YXRlRGVsZXRlKCkge1xyXG4gICAgICAgIHRoaXMubW9kZWwuZGVzdHJveSgpO1xyXG4gICAgfVxyXG4gICAgc3RhdGVTYXZlKCkge1xyXG4gICAgICAgIC8vIHRvZG8gc2F2ZVxyXG4gICAgICAgIHRoaXMuc3RhdGUgPSBWaWV3U3RhdGUuVmlldztcclxuICAgIH1cclxuICAgIHN0YXRlQ2FuY2VsKCkge1xyXG4gICAgICAgIHRoaXMuc3RhdGUgPSBWaWV3U3RhdGUuVmlldztcclxuICAgIH1cclxufVxyXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=